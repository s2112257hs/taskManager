<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create Account</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <div>
        <h1>Sign Up</h1>
        <form id="signupForm">
            <div>
                <label for="fname">First Name</label>
                <input type="text" id="fname" name="fname" autocomplete="given-name" required>
            </div>
            <div>
                <label for="lname">Last Name</label>
                <input type="text" id="lname" name="lname" autocomplete="family-name" required>
            </div>
            <div>
                <label for="email">Email Address</label>
                <input type="email" id="email" name="email" autocomplete="email" required>
            </div>
            <div>
                <label for="pass">Password</label>
                <input type="password" id="pass" name="pass" autocomplete="new-password" required>
            </div>
            <div>
                <label for="cpass">Confirm Password</label>
                <input type="password" id="cpass" name="cpass" autocomplete="new-password" required>
            </div>
            <button type="submit">Create Account</button>
        </form>
    </div>
    <script>
        document.getElementById('signupForm').addEventListener("submit", async (e) => {
            e.preventDefault();
            const firstName = document.getElementById('fname').value;
            const lastName = document.getElementById('lname').value;
            const email = document.getElementById("email").value;
            const password = document.getElementById("pass").value; 
            const confirmPassword = document.getElementById("cpass").value; 

            const response = await fetch("http://127.0.0.1:5000/api/signup", {
            method:"POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({firstName, lastName, email, password, confirmPassword}),
            })
            const data = await response.json();
            if (data.redirect){
                window.location.href = data.redirect;
            }
            else{
                alert(data.error)
            }
        });
    </script>
</body>
</html>
